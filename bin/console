#!/usr/bin/env ruby
# frozen_string_literal: true

require 'bundler/setup'
require 'pry'
require 'byebug'
require 'broken_link_finder'
require 'logger'

# Logs all HTTP requests.
Wgit.logger.level = Logger::DEBUG

# Call reload to load all recent code changes.
def reload
  original_verbose = $VERBOSE
  $VERBOSE = nil # Temporarily suppress ruby warnings.
  load 'load.rb'
  include BrokenLinkFinder
  $VERBOSE = original_verbose # Restore ruby warnings.
  true
end

# You can add fixtures and/or initialization code here...
reload

url = 'http://txti.es/'
by_page = Finder.new
by_link = Finder.new sort: :link
finder = by_page

# Start the console.
puts "\nbroken_link_finder v#{BrokenLinkFinder::VERSION} (#{Wgit.version_str})"

binding.pry
